var et=Object.defineProperty;var nt=(t,s,e)=>s in t?et(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var l=(t,s,e)=>(nt(t,typeof s!="symbol"?s+"":s,e),e);import{I as z,n as ot,J as rt,j as d,f as g,r as p,u as D,K as P,c as H,N as R,O as it,y as b,k as j,z as O,Q as ct,U,X as Z,Y as at}from"./three.module-lM_mZEoP.js";function lt(){var t=new z(9);return z!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function T(){var t=new z(3);return z!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function ft(t){var s=t[0],e=t[1],n=t[2];return Math.hypot(s,e,n)}function _(t,s,e){var n=new z(3);return n[0]=t,n[1]=s,n[2]=e,n}function Lt(t,s,e,n){return t[0]=s,t[1]=e,t[2]=n,t}function Nt(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t}function ht(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t}function ut(t,s){var e=s[0],n=s[1],o=s[2],r=e*e+n*n+o*o;return r>0&&(r=1/Math.sqrt(r)),t[0]=s[0]*r,t[1]=s[1]*r,t[2]=s[2]*r,t}function xt(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]}function N(t,s,e){var n=s[0],o=s[1],r=s[2],i=e[0],c=e[1],a=e[2];return t[0]=o*a-r*c,t[1]=r*i-n*a,t[2]=n*c-o*i,t}var Xt=ht,vt=ft;(function(){var t=T();return function(s,e,n,o,r,i){var c,a;for(e||(e=3),n||(n=0),o?a=Math.min(o*e+n,s.length):a=s.length,c=n;c<a;c+=e)t[0]=s[c],t[1]=s[c+1],t[2]=s[c+2],r(t,t,i),s[c]=t[0],s[c+1]=t[1],s[c+2]=t[2];return s}})();function I(){var t=new z(4);return z!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function dt(t,s,e){e=e*.5;var n=Math.sin(e);return t[0]=n*s[0],t[1]=n*s[1],t[2]=n*s[2],t[3]=Math.cos(e),t}function It(t,s,e){var n=s[0],o=s[1],r=s[2],i=s[3],c=e[0],a=e[1],h=e[2],u=e[3];return t[0]=n*u+i*c+o*h-r*a,t[1]=o*u+i*a+r*c-n*h,t[2]=r*u+i*h+n*a-o*c,t[3]=i*u-n*c-o*a-r*h,t}function X(t,s,e,n){var o=s[0],r=s[1],i=s[2],c=s[3],a=e[0],h=e[1],u=e[2],w=e[3],y,M,f,x,v;return M=o*a+r*h+i*u+c*w,M<0&&(M=-M,a=-a,h=-h,u=-u,w=-w),1-M>rt?(y=Math.acos(M),f=Math.sin(y),x=Math.sin((1-n)*y)/f,v=Math.sin(n*y)/f):(x=1-n,v=n),t[0]=x*o+v*a,t[1]=x*r+v*h,t[2]=x*i+v*u,t[3]=x*c+v*w,t}function wt(t,s){var e=s[0]+s[4]+s[8],n;if(e>0)n=Math.sqrt(e+1),t[3]=.5*n,n=.5/n,t[0]=(s[5]-s[7])*n,t[1]=(s[6]-s[2])*n,t[2]=(s[1]-s[3])*n;else{var o=0;s[4]>s[0]&&(o=1),s[8]>s[o*3+o]&&(o=2);var r=(o+1)%3,i=(o+2)%3;n=Math.sqrt(s[o*3+o]-s[r*3+r]-s[i*3+i]+1),t[o]=.5*n,n=.5/n,t[3]=(s[r*3+i]-s[i*3+r])*n,t[r]=(s[r*3+o]+s[o*3+r])*n,t[i]=(s[i*3+o]+s[o*3+i])*n}return t}var J=ot;(function(){var t=T(),s=_(1,0,0),e=_(0,1,0);return function(n,o,r){var i=xt(o,r);return i<-.999999?(N(t,s,o),vt(t)<1e-6&&N(t,e,o),ut(t,t),dt(n,t,Math.PI),n):i>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(N(t,o,r),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+i,J(n,n))}})();(function(){var t=I(),s=I();return function(e,n,o,r,i,c){return X(t,n,i,c),X(s,o,r,c),X(e,t,s,2*c*(1-c)),e}})();(function(){var t=lt();return function(s,e,n,o){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=o[0],t[4]=o[1],t[7]=o[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],J(s,wt(s,t))}})();function $(){var t=new z(2);return z!=Float32Array&&(t[0]=0,t[1]=0),t}function Y(t,s){var e=new z(2);return e[0]=t,e[1]=s,e}function yt(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t}function Mt(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t}function gt(t,s,e){return t[0]=s[0]*e[0],t[1]=s[1]*e[1],t}function pt(t,s){var e=s[0],n=s[1],o=e*e+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=s[0]*o,t[1]=s[1]*o,t}var zt=Mt;(function(){var t=$();return function(s,e,n,o,r,i){var c,a;for(e||(e=2),n||(n=0),o?a=Math.min(o*e+n,s.length):a=s.length,c=n;c<a;c+=e)t[0]=s[c],t[1]=s[c+1],r(t,t,i),s[c]=t[0],s[c+1]=t[1];return s}})();class Et{constructor({translate:s=T(),rotation:e=I(),scale:n=_(1,1,1)}={}){l(this,"translate");l(this,"rotation");l(this,"scale");this.translate=s,this.rotation=e,this.scale=n}getModelMatrix(){let s=H();return it(s,this.rotation,this.translate,this.scale),s}transform(s){function e(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="number"&&typeof n[1]=="number"&&typeof n[2]=="number"}if(s instanceof V){const n=s.position,o=b(n),r=d();return p(r,o,this.getModelMatrix()),r}else if(e(s)){const o=b(s),r=d();return p(r,o,this.getModelMatrix()),r}else{if(s.length===0)return[];if(s[0]instanceof V){const n=s,o=this.getModelMatrix(),r=[];return n.forEach(i=>{const c=b(i.position),a=d();p(a,c,o),r.push(a)}),r}else{const n=s,o=this.getModelMatrix(),r=[];return n.forEach(i=>{const c=b(i),a=d();p(a,c,o),r.push(a)}),r}}}}class kt{constructor({translate:s=d(),rotation4D:e=new _t,scale:n=g(1,1,1,1)}={}){l(this,"translate");l(this,"rotation4D");l(this,"scale");this.translate=s,this.rotation4D=e,this.scale=n}getRotationScaleMatrix(){const s=this.rotation4D.getRotationMatrix();return s[0]=s[0]*this.scale[0],s[5]=s[5]*this.scale[1],s[10]=s[10]*this.scale[2],s[15]=s[15]*this.scale[3],s}transform(s){function e(o){return Array.isArray(o)&&o.length===3&&typeof o[0]=="number"&&typeof o[1]=="number"&&typeof o[2]=="number"}function n(o){return Array.isArray(o)&&(o.length===0||o[0]instanceof k)}if(s instanceof k){const o=s.position,r=this.getRotationScaleMatrix(),i=d();return p(i,o,r),D(i,i,this.translate),i}else if(e(s)){const o=s,r=this.getRotationScaleMatrix(),i=d();return p(i,o,r),D(i,i,this.translate),i}else{if(s.length===0)return[];if(n(s)){const o=[],r=this.getRotationScaleMatrix();return s.forEach(i=>{const c=i.position,a=d();p(a,c,r),D(a,a,this.translate),o.push(a)}),o}else{const o=[],r=this.getRotationScaleMatrix();return s.forEach(i=>{const c=i,a=d();p(a,c,r),D(a,a,this.translate),o.push(a)}),o}}}}class _t{constructor(s=0,e=0,n=0,o=0,r=0,i=0){l(this,"xy");l(this,"yz");l(this,"xz");l(this,"xw");l(this,"yw");l(this,"zw");this.xy=s,this.yz=e,this.xz=n,this.xw=o,this.yw=r,this.zw=i}getRotationMatrix(){const s=P.rotateXY(this.xy),e=P.rotateYZ(this.yz),n=P.rotateXZ(this.xz),o=P.rotateXW(this.xw),r=P.rotateYW(this.yw),i=P.rotateZW(this.zw),c=H();return R(c,s,c),R(c,n,c),R(c,e,c),R(c,o,c),R(c,r,c),R(c,i,c),c}}class St{constructor({transform:s=new Et,mesh:e=new G}={}){l(this,"transform");l(this,"mesh");this.transform=s,this.mesh=e}}class mt{constructor({transform:s=new kt,mesh:e=new tt}={}){l(this,"transform");l(this,"mesh");this.transform=s,this.mesh=e}}function At(t,s,e){return t[0]*s[1]-t[1]*s[0]+s[0]*e[1]-s[1]*e[0]+e[0]*t[1]-e[1]*t[0]>0}class C{constructor(s,e){l(this,"points");l(this,"fillColor");this.points=s,this.fillColor=e}}const Pt=[255,128,128],Rt=[255,207,150],Ct=[205,250,219],Wt=[246,253,195],K=[205,250,219,224],Q=[64],Vt=[64],$t=6,Tt=[128];function F(t,s,e,n,o,r=20){const i=$();zt(i,s,e),pt(i,i);const c=$();gt(c,i,Y(r,r));const a=$();yt(a,s,c),t.push(),t.stroke(Tt),t.strokeWeight(2),t.line(e[0],e[1],s[0],s[1]),t.pop(),t.push(),t.rectMode(t.RADIUS),t.noStroke(),t.fill(o),t.rect(a[0],a[1],8,10,4),t.pop(),t.push(),t.textAlign(t.CENTER,t.CENTER),t.textSize(16),t.text(n,a[0],a[1]+2),t.pop()}function Ot(t,s){const e=s[0],n=s[1],o=s[2],r=s[3],i=s[4];t.push(),t.stroke(0),t.strokeWeight(6),t.point(e[0],e[1]),t.pop(),n!=null&&F(t,n,e,"X",Pt),o!=null&&F(t,o,e,"Y",Rt),r!=null&&F(t,r,e,"Z",Ct),i!=null&&F(t,i,e,"W",Wt)}function Ut(t,s,e,n){if(n==null){const o=new V({position:_(0,0,0)}),r=new V({position:_(t,0,0)}),i=new V({position:_(0,s,0)}),c=new V({position:_(0,0,e)}),a=new E([0,1]),h=new E([0,2]),u=new E([0,3]),w=[o,r,i,c],y=[a,h,u];return new St({mesh:new G({vertice:w,edges:y})})}else{const o=new k({position:g(0,0,0,0)}),r=new k({position:g(t,0,0,0)}),i=new k({position:g(0,s,0,0)}),c=new k({position:g(0,0,e,0)}),a=new k({position:g(0,0,0,n)}),h=[o,r,i,c,a],u=new E([0,1]),w=new E([0,2]),y=new E([0,3]),M=new E([0,4]),f=[u,w,y,M];return new mt({mesh:new tt({vertice:h,edges:f})})}}class Zt{constructor(s,e){l(this,"x");l(this,"y");this.x=s,this.y=e}display(s){s.push(),s.strokeWeight(6),s.point(this.x,this.y),s.pop()}}function L(t,s,e,n){let o;if(n){const i=n.objectToClip(t);o=e.objectToClip(i)}else o=e.objectToClip(t);const r=[];return o.forEach(i=>{const c=j(i);c[0]=(i[0]/2+.5)*s.width,c[1]=(-i[1]/2+.5)*s.height,r.push(c)}),r}function q(t,s){const e=[];return s.forEach(n=>{const o=new C([],n.color);n.indice.forEach(r=>{o.points.push(t[r])}),e.push(o)}),e}function qt(t,s,e,n,o){if(o){const r=L(t,s,e,n),i=q(r,t.mesh.faces);W(s,i,o)}else{const r=L(t,s,e),i=q(r,t.mesh.faces);W(s,i,n)}}function Bt(t,s,e,n){let o;n?o=L(t,s,e,n):o=L(t,s,e),Dt(s,o),bt(s,o,t.mesh.edges)}function Dt(t,s,e){t.push(),e&&e.isStroke?(t.stroke(e.stroke),t.strokeWeight(e.strokeWeight)):(t.stroke(Vt),t.strokeWeight($t)),s.forEach(o=>{t.point(o[0],o[1])}),t.pop()}function bt(t,s,e,n){t.push(),n&&n.isStroke?(t.stroke(n.stroke),t.strokeWeight(n.strokeWeight)):(t.stroke(Q),t.strokeWeight(2));const o=s;e.forEach(r=>{const i=o[r.indice[0]],c=o[r.indice[1]];t.line(i[0],i[1],c[0],c[1])}),t.pop()}function Ft(t){if(t.length<4)return t;for(var s=[],e=0,n=1;n<t.length;n++)t[n][0]<t[e][0]&&(e=n);for(var o=e,r=0;;){s.push(t[o]);for(var i=(o+1)%t.length,n=0;n<t.length;n++){var c=Z(t[n],t[o]),a=Z(t[i],t[o]),h=at([c[0],c[1],0],[a[0],a[1],0]);h[2]>0&&(i=n)}if(o=i,o==e||(r++,r>t.length))break}return s}function Ht(t,s,e,n,o){const r=[],i=o.transform.transform(o.mesh.vertice);o.mesh.faces.forEach(f=>{const x=new C([],f.color);f.indice.forEach(v=>{x.points.push(i[v])}),r.push(x)});const c=[],a=[],h=[];for(let f=0;f<r.length;f++){let x=B(r[f],!1);for(let S=0;S<x.length;S++)x[S][2]==0&&c.push(j(x[S]));a[f]=new C(x,r[f].fillColor);let v=B(r[f],!0);h[f]=new C(v,r[f].fillColor)}function u(f,x,v){f.forEach(S=>{S.points.forEach(m=>{const A=d();p(A,m,x);const st=g(A[3],A[3],A[3],A[3]);O(m,A,st),m[0]=(m[0]/2+.5)*v.width,m[1]=(-m[1]/2+.5)*v.height})})}let w=s.getVPMatrix();u(a,w,t),W(t,a);const y=[new C([[0,0,0,1],[0,3,0,1],[3,3,0,1],[3,0,0,1]],[128,128,128,64])];u(y,w,t),W(t,y,{isStroke:!1,stroke:[0],strokeWeight:2}),u(h,w,t),W(t,h);let M=n.getVPMatrix();c.forEach(f=>{const x=d();p(x,f,M);const v=g(x[3],x[3],x[3],x[3]);O(f,x,v),f[0]=(f[0]/2+.5)*e.width,f[1]=(-f[1]/2+.5)*e.height}),W(e,[new C(Ft(c),K)])}function W(t,s,e){t.push(),t.blendMode(t.BLEND),e?e.isStroke?(t.stroke(e.stroke),t.strokeWeight(e.strokeWeight)):t.noStroke():(t.stroke(Q),t.strokeWeight(2));const n=[],o=[];s.forEach(r=>{if(r.points.length<3)return;const i=Y(r.points[0][0],r.points[0][1]),c=Y(r.points[1][0],r.points[1][1]),a=Y(r.points[2][0],r.points[2][1]);At(i,c,a)?o.push(r):n.push(r)}),n.forEach(r=>{t.beginShape(),t.fill(r.fillColor),r.points.forEach(i=>{t.vertex(i[0],i[1])}),t.endShape(t.CLOSE)}),o.forEach(r=>{t.beginShape(),t.fill(r.fillColor),r.points.forEach(i=>{t.vertex(i[0],i[1])}),t.endShape(t.CLOSE)}),t.pop()}function B(t,s){const n=[];function o(i){return s?i[2]>=0:i[2]<0}let r=j(t.points[t.points.length-1]);for(let i=0;i<t.points.length;i++){let c=j(t.points[i]);if(!ct(c,r)){if(o(c)){if(!o(r)){let a=c[2]-r[2],h=(0-r[2])/a,u=U(r,c,h);u[2]=0,n.push(u)}n.push(c)}else if(o(r)){let a=c[2]-r[2],h=(0-r[2])/a,u=U(r,c,h);u[2]=0,n.push(u)}}r=c}return n}class V{constructor({position:s=T(),color:e=g(0,0,0,1),normal:n=T(),uv:o=$()}={}){l(this,"position");l(this,"color");l(this,"normal");l(this,"uv");this.position=s,this.color=e,this.normal=n,this.uv=o}}class E{constructor(s=[-1,-1]){l(this,"indice");this.indice=s}}class Jt{constructor({indice:s=Array(),color:e=K}={}){l(this,"indice");l(this,"color");this.indice=s,this.color=e}}class G{constructor({vertice:s=Array(),edges:e=Array(),faces:n=Array()}={}){l(this,"vertice");l(this,"edges");l(this,"faces");this.vertice=s,this.edges=e,this.faces=n}}class k{constructor({position:s=d(),color:e=g(0,0,0,1),normal:n=d(),uv:o=$()}={}){l(this,"position");l(this,"color");l(this,"normal");l(this,"uv");this.position=s,this.color=e,this.normal=n,this.uv=o}}class tt{constructor({vertice:s=Array(),edges:e=Array(),faces:n=Array()}={}){l(this,"vertice");l(this,"edges");l(this,"faces");this.vertice=s,this.edges=e,this.faces=n}}export{N as A,E,Jt as F,St as M,Zt as P,Et as T,V,K as a,_ as b,Nt as c,F as d,Q as e,Y as f,Ut as g,Ot as h,kt as i,Bt as j,G as k,I as l,dt as m,It as n,Ht as o,L as p,mt as q,qt as r,Lt as s,k as t,tt as u,T as v,Xt as w,Pt as x,Rt as y,ut as z};
